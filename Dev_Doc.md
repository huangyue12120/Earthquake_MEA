# 智农有道APP产品开发文档

## 设计思路

`智农有道`APP的开发是为了方便农民，因此在产品设计上尽可能多的将农民种植农作物时需要考虑到的因素都包含在内，如农作物疾病的识别与防止，农作物所需生长环境及浇水、施肥方案，农场位置查询、标识、围栏划分及导航等。

## 使用的API

科大讯飞AIUI语音引擎
>AIUI是科大讯飞2015年推出的自然语言理解为核心的全链路人机交互语音解决方案，可快速让你的应用和设备能听会说，能理解会思考。AIUI语义信息透明开放，可云端接入，支持业务自由定制；接入了 AIUI 的应用和设备，可轻松实现查询天气、播放音视频资源、设置闹钟以及控制智能家居等语音交互能力。

百度地图开放接口
>百度地图开放平台已成为国内最大的互联网地图基础设施，面向开发者开放六大基础服务能力——定位、影像、出行、轨迹、数据、分析。目前开发者注册数超过115万，开发者市场份额已达75%，日均响应位置服务请求次数突破800亿次，每日服务活跃的应用及网站超过65万，每10个用到地图能力的应用当中就有7个应用在使用百度地图开放平台的产品及服务，由百度鹰眼提供的轨迹开放能力每日覆盖轨迹里程已达1亿公里。同时，百度地图开放平台也提供并支持共享出行、快递物流、在线旅游、互联网房产、智能穿戴、LBS游戏、车载硬件等多个行业的一站式服务解决方案，覆盖多种终端设备及硬件产品。

PM25.in开放接口
>PM25.in 是广州 BestApp 工作室开发的一个空气质量数据监测产品。收录了全国 74 个城市，近 500 个监测点的实时数据（毎小时更新）。数据源于国家环保局和各地环保机构的公开数据。开发团队将所有采集的数据进行统一处理，然后再通过 API 的方式提供出去。

和风天气API
>和风天气API为用户提供一个简洁的RESTful Web接口，用以访问基于位置的天气数据。和风天气API v7版本提供如下天气数据内容：3-15天天气预报（全球），未来7天逐小时天气预报（全球），实况天气（全球），1公里格点实况天气（中国），1公里格点逐天预报天气（中国），1公里格点逐小时预报天气（中国），分钟级降雨预报（中国），极端天气灾害预警（中国、美国、欧洲），中国4A和5A级景点3-7天天气预报（中国），生活指数（全球），历史天气（全球），太阳角度（全球），日出日落（全球），月升月落（全球），台风路径和周围天气（中国），卫星云图（中国、美国、欧洲、日本），中国空气质量指数实况（中国），中国未来7天空气质量预报（中国）。

Glide图片加载API  （“com.github.bumptech.glide”）
>Glide是一个快速高效的Android图片加载库，注重于平滑的滚动。Glide提供了易用的API，高性能、可扩展的图片解码管道（decode pipeline），以及自动的资源池技术。Glide 支持拉取，解码和展示视频快照，图片，和GIF动画。Glide的Api是如此的灵活，开发者甚至可以插入和替换成自己喜爱的任何网络栈。默认情况下，Glide使用的是一个定制化的基于HttpUrlConnection的栈，但同时也提供了与Google Volley和Square OkHttp快速集成的工具库。

## APP开发环境

本软件基于Android 9 (API 28) 开发，使用语言为Java + Python。虽然届时Android 10 (API 29) 已出，但出于稳定性考虑，决定使用已推出近一年的API 28作为开发环境。

## 产品模块

本APP针对上述因素，开发了

* `智能机器人模块`、

* `农业新闻阅读模块`、

* `农业知识阅读模块`、

* `病虫害诊断模块`、

* `PH值检测模块`、

* `图片识别病虫害模块`、

* `农场地图模块`、

* `PM2.5查询模块`、

* `天气查询模块`。

  本软件主要使用多fragments布局，在打开APP看到首页时就将其大部分功能一览无余，方便无使用经验的用户也能更快上手使用本软件。

### 智能机器人模块

智能机器人模块主要使用科大讯飞AIUI智能语音引擎，将我们训练的自定义语料加载进去，用户可以通过发送文字或者语音录入的方式发送信息进行提问，等待语音引擎加载完毕后，将优质回答以文字和语音播报的形式反馈给用户。这种在线问答可以及时为用户提供对应病害的解决方法。该模块界面布局主要使用Listview来实现，语音识别、输入、关键词判断均使用讯飞API完成。

### 农业新闻阅读模块

农业新闻阅读模块旨在让用户了解更多最新的农业咨询、农业政策，在首页底部出现，数据来源于[蔬菜新闻网](http://www.vegnet.com.cn/News/)，新闻列表布局使用RecyclerView，实现【新闻图片+ 新闻标题 + 新闻来源及时间】的显示模式，打开新闻后，新闻界面使用webView显示，如果感觉阅读、使用不够方便，用户可选择使用浏览器打开，还可复制网页链接分享给他人。同时，考虑到用户为农民，知识水平可能不高，为了用户使用方便，本软件借助讯飞语音API，可将新闻标题及内容读出来。

### 农业知识阅读模块

农业知识阅读模块旨在让用户了解更多农作物病虫害的知识。为此，本软件借助[中国农业种质信息网](http://www.cgris.net/disease/)和[蔬菜新闻网](http://www.vegnet.com.cn/Disease)两大网站的数据初步建立了数据库，尽可能多的将农作物病虫害收集并罗列出来。本模块布局使用Fragment建立简单索引，从数据库获取数据列表，作物列表使用RecyclerView实现【作物图片+作物名称】显示模式，病害列表使用网格式布局（GridLayoutManager）生成两列数据，

### 病虫害诊断模块

病虫害诊断模块是通过让用户自主选择作物类型，叶、花等特征，提交选择后根据学习结果得到最有可能的作物疾病，使用深度学习 **~~（不会编）~~** 的方法得出最有可能的病害，界面布局使用RecyclerView。

### PH值检测模块

PH值检测模块使用Bomb进行PH及农作物的云存储，同时根据农作物和PH值给出相应的施肥方案。Bomb是一个可以开发云存储的移动应用软件，给应用软件快速添加一个安全灵活的后台管理系统，方便浏览终端保存的各种信息。针对移动应用开发的特性，Bmob还提供了主动推送服务.
可以让移动开发者将信息从服务器直接推送到应用程序中，从而实现软件的主动更新、信息通知等服务。Bomb为用户提供了实时数据与文件存储功能，轻松实现应用“云与端”的数据连通。数据存储除了常规应用文本信息的存储，还可以存储图片、视频、音频、地理位置等信息。
此外数据服务还内置用户系统、即时通讯、权限控制等，开发者几行代码即可实现快速集成。

### 图片识别病虫害模块

图片识别病虫害模块从用户的不同需求考虑，分拍照、本地和拍照上传至云端三种思路。用户可以对发病的作物叶片或者果实进行拍照，识别到农作物后会进行病虫害识别，帮助用户快速找到解决方法，对症下药。对输入的图片进行深度学习 **~~（不会编）~~** 识别后返回最有可能的病害种类，用户可以根据返回值做出相应抉择。

### 农场地图模块

农场地图模块借助百度地图开放API，通过调用地图SDK接口，访问百度地图服务和数据，构建功能丰富、交互性强的地图类应用程序。
* 地图功能：
    * 地图展示：普通地图（2D，3D）、卫星图和实时交通图，开放高清4K地图显示。
    * 地图交互：可通过接口或手势控制来实现地图的单击、双击、长按、缩放、旋转、改变视角等操作。
* 定位功能：
    * 地图定位：帮助开发者快速、精准的获取用户定位。开发者只需按照如下流程操作，即可获取用户当前经纬度。
* 地图围栏功能：
    * 围栏划分：向以当前位置为中心、指定大小的范围内的区域添加一个Overlay，可方便用户对于不同功能地域进行分区。
### PM2.5查询模块

PM2.5查询模块借用http://www.pm25.in/ API获取各城市1小时内的空气质量数据，城市列表、监测站点列表页面布局使用ListView显示，实现【站点名称 + 空气质量】显示模式。

### 天气查询模块

借助“和风天气”的天气API，获取城市天气信息。查询当天、多天天气，方便用户针对天气情况做出更加合理的施肥、浇水决策，当天天气与多天天气之间切换使用Fragment实现。